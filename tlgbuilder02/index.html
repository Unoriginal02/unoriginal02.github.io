<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Trilogi's Mockup Builder</title>

    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />

    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" />

    <!-- Sortable.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>

    <!-- Quill Editor Stylesheet -->
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">

    <!-- Custom Stylesheet -->
    <link rel="stylesheet" href="css/style.css" />
</head>

<body>
    <!-- Top Bar -->
    <div class="top-bar">
        <div class="title">
            Trilogi's Mockup Builder
        </div>
        <div class="button-group">
            <!-- Mode Toggle Switch -->
            <div class="toggle-switch">
                <label for="modeToggle">Desktop</label>
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="modeToggle">
                </div>
                <label for="modeToggle">Mobile</label>
            </div>
            <button id="exportBtn" class="btn btn-secondary">Export</button>
            <button id="importBtn" class="btn btn-secondary">Import</button>
            <button id="getListBtn" class="btn btn-secondary">Get List</button>
            <!-- Hidden file input for Import -->
            <input type="file" id="importFileInput" accept=".json" style="display: none;" />
        </div>
    </div>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Canvas / Stack Area -->
        <div id="canvas" class="canvas mt-3">
            <!-- Blocks will be inserted here dynamically -->
        </div>

        <!-- Plus Sign to add a new block at the bottom -->
        <div class="text-center mt-4 mb-4">
            <button id="addBlockBtn" class="btn btn-outline-primary btn-lg" data-bs-toggle="modal"
                data-bs-target="#modulesModal">
                +
            </button>
        </div>
    </div>

    <!-- Modal to choose a module -->
    <div class="modal fade" id="modulesModal" tabindex="-1" aria-labelledby="modulesModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="modulesModalLabel">Choose a Module</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <!-- Nav pills for categories -->
                    <ul class="nav nav-pills mb-3" id="modulesTab" role="tablist">
                        <!-- Nav items will be populated dynamically -->
                    </ul>
                    <!-- Tab content -->
                    <div class="tab-content" id="modulesTabContent">
                        <!-- Tab panes will be populated dynamically -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for module list -->
    <div class="modal fade" id="listModal" tabindex="-1" aria-labelledby="listModalLabel" aria-hidden="true">
        <div class="modal-dialog" style="height: 600px;">
            <div class="modal-content" style="height: 100%;">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="listModalLabel">Module List</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="moduleListContainer"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for adding/editing notes with a larger dialog -->
    <div class="modal fade" id="noteModal" tabindex="-1" aria-labelledby="noteModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="noteModalLabel">Add/Edit Note</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <!-- Quill editor container with updated height -->
                    <div id="noteEditor" style="height: 600px;"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" id="saveNoteBtn" class="btn btn-primary">Save Note</button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <!-- NEW: Paste Image Modal -->
    <div class="modal fade" id="pasteModal" tabindex="-1" aria-labelledby="pasteModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="pasteModalLabel">Paste Image</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Please paste your image now (Ctrl+V or Command+V).</p>
                </div>
            </div>
        </div>
    </div>
    <!-- End New Modal -->

    <!-- Bootstrap JS + Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Quill Editor Script -->
    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
    <!-- Custom JavaScript Files -->
    <script src="js/modulesData.js"></script>
    <script src="js/app.js"></script>
</body>

</html>